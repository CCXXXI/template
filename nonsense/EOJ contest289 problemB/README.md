# 2020春 数据结构与算法实践 作业 top-k商户查询

## 题面

**TL;DR**：给定m个点，对于另外n个点中的每个点，求key相同且距离最近的k个点

> 随着智能手机的普及，地理信息在诸如高德地图、大众点评、饿了么等App中得到广泛的应用，此次数据结构课程期末大作业将模拟实际生活中的查询需求，完成基于地理信息和文本信息的查找任务。
>
> 系统中每家商户包含以下3项信息：
> 1.位置(x,y)，x>0, y>0；
> 2.商家名称， 12 位 A−Z 字符串，不含小写；
> 3.菜系， 6 位 A−Z 字符串，不含小写；
>
> 你的程序需要提供给用户以下查询的功能：用户输入自己的位置点如 <ux,uy>、感兴趣的菜系和整数 k 值，程序按照由近到远输出商家名称和距离，距离相等时以照商家名称的字典序为准。在此距离精确到小数点后的 3 位（四舍五入）。若满足条件的商户不足 k 个，则输出所有满足条件的商家信息。若存在一次查询中无任何满足条件的商户，则输出空行即可。

## 格式与限制

**TL;DR**：

* 输入m,n
* 输入m个点的`name` `x` `y` `key`
* 输入n个点的`x` `y` `key` `k`
* 输出k个点的`name` `dis`，dis为其到查询点的距离
* 四舍五入到小数点后3位的`dis`为第一关键字，`name`为第二关键字

### 输入格式

> 第 1 行：商户的数量 m 和查询的数量 n ， m 和 n 为整数，均不超过 109 ；
> 第 2−(m+1) 行：商户的信息，包括商家名称，位置 x ，位置 y 和菜系；
> 最后的 n 行：每一行表示一次查询，包括用户的位置 ux 和 uy 、菜系名称、 k 值；

### 输出格式

> 对应于每一次查询，按照顺序输出满足条件的商户信息，每一行对应于一家商户。

## 额外信息

仁慈的老师和助教直接把[输入文件](./input)发了出来，让我们可以从中获知更多可利用的条件

随便写个[程序](./test.py)扫一下，得到如下结果：

```
x_min=0
x_max=30000
y_min=0
y_max=30000
max_key_nums=800
```

可以看到坐标范围是0到30000，题目描述的x>0, y>0有误，但没什么影响

上限30000，可以用16位整数保存

key最多只有800个，可以随便找一个完美哈希函数来用

再写个[程序](./get_keys.py)把[所有key](./all_keys.txt)分离出来，虽然没有必要为所有key生成完美哈希函数，但这样比较简单
